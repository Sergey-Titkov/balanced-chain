# Симулятор управления сбалансированной производственной цепочкой

## Зачем все это
Программа написана по мотивам байки приведенной ниже, ее цель моделирование сбалансированной производственной цепочки. Игроку дается возможность не только попытаться выиграть :) но и попробовать разбалансировать цепочку и посмотреть к чему это приведет.

Правила игры в программе соблюдены дословно. Для большего контроля и понимание ведется детальный лог.

Теперь байка:

## [Байка для оруженосца- 14. Сбалансированная производственная цепочка.](http://blog.shumoos.com/archives/327)

Сегодня очередное безумное чаепитие проходило на природе. Когда не было особой запарки с проектами, команда выезжала за город. Позади были картинг, пейнтбол, стрельба из лука. Впереди - волейбол и рыбная ловля. Вечером ожидались шашлыки десятка разных сортов, но до них было еще далеко.

Так что за огромным столом был традиционный для команды “five o’clock”. Но и на нем не обошлось без игр. Играли в игру из романа “Слишком много поваров” Рекса Стаута. Чеширский отобрал множество ингредиентов для заварки. Чабрец, липовый цвет, листья земляники … Всего дюжину добавок. И заварил пять огромных пузатых чайников. Но в каждый положил только десять компонентов. И теперь надо было угадать в каком чайнике чего не хватает. Организовалось две команды. Одной верховодила вернувшаяся с Байкала Соня, другой Шляпник. Королева и почтивший чаепитие свои вниманием Время были простыми участниками.
time.JPG

- Итак, чего не хватает в третьем чайнике? - огласил задачу участвовавший в качестве рефери Заяц.
- Малина, - ответила за команду Сони Синичка.
- Малина, - подтвердил Додо. И обе команды выложили стикеры с надписью “малина” к четвертому чайнику.
В центр скамьи плюхнулся припозднившийся Оруженосец.
- Будешь чай без малины?
- Если в каждом чайнике чай без чего-то, то чтобы устранить вариации, нужно налить из всех, - и Армигер принялся наливать из всех чайников.
- Ну, полностью ты их не устранишь.
- Согласен. В отделе тестирования из 5 человек, где в аналогичной ситуации требуется 12 навыков от отдела, но каждый тестировщик не владеет двумя навыками, получается, что 2 навыками владеют все 5 человек, а остальными 10 навыками владеют только по четыре человека. Несбалансированный рабочий центр. Но и вариации минимальны. То, что надо.
- Следующий отсутствующий ингредиент?
- Мы решили, что шиповник.
- Нет, - возразила Соня, - сагаан-дайля.
- Кстати, а что это за травка? - поинтересовался Время.
- Крайне популярный в Бурятии чайный напиток. Соня из отпуска привезла, - ответил Чеширский.
- Протестую! - воскликнул Шляпник - Она единственная, кто его пробовал.
- Протест отклонен. Я тоже пробовал, - хладнокровно парировал Заяц. И проворчал: - Вот о памяти на ферритовых сердечниках он знает все, а в траве не разбирается. Переходим к следующему чайнику.

- Кстати, я новое определение “нормального тестирования” узнал, - поделился Армигер. - “Нормальное тестирование” - это тестирование, которое подчиняется центральной предельной теореме, то есть соответствует нормальному распределению.
Не вовремя он это сказал. Шляпник поперхнулся чаем и зашелся в Безумном кашле. Заяц с размаху хлопнул его по спине и восхищенно протянул:
- Круто. Пожалуй, это еще более крутая глупость, чем “ненормальное тестирование”. Но ты в курсе, что термины “позитивные” и “негативные” тесты тоже не блещут разумностью?
Теперь чаем поперхнулся Оруженосец.
- Но как, Холмс? Как? - наконец выдавил он.
- Это же элементарно, Карл! Негативный тест - это тот, который ошибки не нашел. А позитивный - тот, который нашел. И негативные тесты потому так и называются, что негативно сказываются на производительности работы отдела. Выполнение негативных тестов резко уменьшает производительность.
- Точно, - кивнула Соня, - а то, что ошибочно называют “позитив-негатив”, это прием проектирования функциональных тестов, основанный на технике юзкейсов. Позитивные сценарии это на самом деле сценарии, в которых достигаются цели пользователя, а негативные - где цели не достигаются, но выполняются минимальные гарантии. Кстати, тестировщик, желающий покинуть уровень начинающего, этими техниками должен владеть. Но, как тестировщик, замечу, что выполнение негативных тестов, не находящих дефектов, снижает производительность не так уж резко. Фиксация багов занимает очень много времени.
- Более важно другое, - вмешалась Королева - повышение производительности это по классификатору действий операционного менеджера всего лишь четвертый пункт по важности. Последний. С огромным отрывом от него лидирует второй пункт - уменьшение вариаций. - И задумчиво протянула: - Все-таки зверобой или матрешка?
- И часто мы приносим производительность отдельного рабочего центра в жертву, - добавила Соня.

- Во-во, - сказал, подходя, Квазичерепах. Ему нужно было “зарисоваться” у Времени. - Для этого и нужны менеджеры. Чтобы контролировать работу сотрудников. Чтобы никто не сидел без дела.
- Как же никто не будет сидеть без дела, если у кучи РЦ есть запас по мощности? - удивился Армигер.
- А загружать работой надо. И балансировать команду.
- Но… - но тут Заяц сильно наступил Армигеру на ногу, и тот заткнулся.
- Мне показалось, что управлять сбалансированной цепочкой довольно сложно. Но, может, у меня просто не хватает опыта? - начал сольную партию Заяц. - Вот смотри, как-то мне показали такую игру… - И Заяц начал рассказывать правила.

    Правила игры.
>    Играют двое: банкир и игрок. Банкир просто осуществляет денежные операции, не делая ходов, а игрок каждый ход решает, >сколько заказов брать в производство. Производство состоит из пяти рабочих центров, и заказ последовательно проходит через них. >Каждый рабочий центр за ход может обработать от 1 до 6 заказов. Это решается игральным кубиком D6. Первые пять ходов игрок >наполняет рабочую цепочку. Это предварительная стадия. После пяти ходов происходит первая продажа. С этого момента начинается >собственно игра.
>    За каждую единицу продукции, вышедшей с конвейера, банкир выплачивает игроку 5 у. е. денег. Обслуживание производственной >цепочки стоит 10 у. е. в ход. Считая, что средняя пропускная способность каждого узла 3,5 единицы, в максимуме цепочка в >среднем генерирует в ход 17.5 у. е. Что довольно выгодно.
>
>    Но есть одно “но”. За задержку заказа на один ход игрок платит 1 у. е. Это может быть различный тип потерь: заказчик >разозлился и ушел; штрафные санкции за опоздание; но, как правило, в индустрии разработки ПО заказчик вынуждает исполнителя >сделать что-то бесплатно. В любом случае - это потери. Потери небольшие. Всего одна единица за один ход опоздания. Поскольку >множество менеджеров очень медлительны в принятии управленческих решений, то для ускорения игры на принятие решения о том, >сколько взять заказов в производство, игроку отводится 15 секунд. Если игрок не успел принять решение - ход делает банкир и >запускает в производство о 0 до 6 единиц заказов на свой выбор.

- И что, ты не можешь справиться с этой простейшей задачей? Тут прекрасная маржинальность. Квазичерепах любил умные слова с тренингов по эффективности.
- Так я ж программист. У меня опыта управления меньше, чем ничего. - Заяц разливался соловьем. - Но я бы взял несколько уроков.
- Я собираюсь еще турнир по волейболу посмотреть.
- Да я не бесплатно. Скажем по 100 рублей за условную единицу. Зарплата у меня небольшая, но за образование я исправно плачу.
- Тут еще надо посмотреть, - попытался отвертеться Квазичерепах.
- Тебе что-то не нравится в игре? Может, цепочка не сбалансирована?
- Сбалансирована. - Квазичерепах все больше запутывался в расставленной Зайцем ловушке.
- Может быть, производство невыгодно? Или у тебя, как и у меня, не хватает опыта справиться с управлением?
- Вот почему мне нравится работать с американскими менеджерами, так это потому, что у них принято не только следить за базаром, но и отвечать за базар. У них есть прекрасная поговорка: “Покажи мне деньги или заткнись”, - вступил Чеширский Кот, глядя честными глазами в глаза Времени.
- Вернее, делай ставку или засунь свой язык в задницу, - поправила Соня.
- Что вы, - продолжал петь Заяц, - Квазичерепах привык отвечать за свои слова.
На самом деле Черепах отвечать за свои слова терпеть не мог. И именно по этой причине панически боялся трекеров, с неумолимой жестокостью хранивших историю распоряжений руководителей.

Квазичерепах огляделся. Терять лицо в присутствии Времени было совершенно невозможно. Да и выигрыш манил. И он пошел ва-банк:
- Хорошо, но на кон ты поставишь часы с олимпиады-80.
- Упс, - смутился Заяц, достал часы-луковицу из кармана жилетки, положил на стол и накрыл лапой. Дрожащим голосом он произнес: - Они дорогие и дороги мне.
- Как знаешь.
- Ладно, - решился Заяц, - играем, пока я не проиграю часы, но не более. Или до пятидесяти ходов. Но, слушай, если я все равно проигрываю одну и ту же сумму, а шашлыки уже скоро, может, увеличим ставку? Пусть мое расставание с часами не будет как визит к стоматологу. Болезненным и бесконечно длинным. По двести?
- Да хоть по триста.
- Пусть будет по 250, - решил Заяц, организовывая игровое поле. - А остальных прошу выявить недостающие ингредиенты в четвертом чайнике.
- Коллеги, прошу меня извинить, но мне надо посетить и другие столики, - сказал, вставая, Время. - Мой уход команду не ослабит. У вас гораздо больший опыт в дегустации чаев. Я уже пять раз из шести не угадал.
- Я тоже пойду, - извинился Оруженосец. - Последние посиделки с моей командой. На следующей неделе я покидаю проект, в который меня послали, и возвращаюсь к вам.

Отойдя за пределы слышимости, Армигер произнес:
- Беспокоюсь я за Зайца. Конечно, эти часы совсем не его серебряный брегет девятнадцатого века, но к любым часам из коллекции он относится крайне трепетно.
- Я бы на твоем месте беспокоился, чтобы у Квазичерепаха нервного срыва не было. Исходя из здравого смысла, цепочка кажется прибыльной, но наше моделирование в квартете “Заяц, Шляпник, Соня и я” не позволило найти выигрышную стратегию за игрока за приемлемое время. Может, она и есть, но найти ее за столом невозможно. Я давно не верю в здравый смысл. Я верю экспериментам.
Это еще что. Как-то на одной пафосной конференции топ-менеджеров, Заяц развел какого-то топа. У того портфель ломился от сертификатов: MBA, PMI, ISO, CMMI, факультет управления престижнейшего вуза и т. д. Пробу ставить некуда. А Заяц, мотивируя, что у него совсем нет денег, предложил сыграть по скромной ставке в 100 евро за условную единицу. Не знаю, что там было дальше, но в следующем месяце Заяц пристроил к загородному домику уменьшенную реплику Биг Бена. Восемь метров кирпичной кладки в высоту, четыре циферблата по ярду каждый. И механическая музыка, с отдельной мелодией на каждый день недели. Это тебе не mp3. Это настоящая механика!

- А почему вы от Квазичерепаха не избавитесь?
- На ты, моншер, на ты. Потому что иногда мне нужно избавляться от невменяемых заказчиков. Невменяемый заказчик с кучей денег - это неплохо, но чаще они просят сделать проект за пять процентов от себестоимости. И вот такие заказчики с Квазичерепахом находят друг друга. Как два одиночества. Пока ни один такой заказчик не обратился к нам во второй раз. Но какова Соня! Чеширский ладно - наглая беспринципная сволочь. Но Соня так ловко продолжила развод! Как будто репетировала. Кстати. Я нашел конкурента, которому подарю Квазичерепаха. Вот только сделаем ему идеальное резюме. А может, и сертификат по управлению какой-то поможем получить. Ты же напишешь ему прекрасную рекомендацию?

==========================
Постскриптум.
На шашлыках Оруженосец шепотом спросил Зайца:
- Часы при тебе?
- При мне, - Заяц хлопнул по карману и так же шепотом продолжил: - И тирольскими пирогами мы теперь обеспечены минимум на месяц. - И хлопнул по другому карману. - Ведь это была сбалансированная производственная цепочка!

## Как собрать
Программа использует для логироания классы из фреймворка: [mORMot](http://synopse.info/fossil/wiki?name=Downloads). 

## Ссылки
